#pragma once

//!WARNING SUPPOSED INCLUDES ONLY IN .CPP files
// -----------------------------------------------------------------------------
// Macros for easy tracing.
// If ENABLE_TRACING is defined at compile time, these macros expand to logging calls;
// otherwise, they are no-ops.
#ifdef ENABLE_TRACING

#define TRACE_LOG(tracer, level, message) (tracer)->log((level), (message), __FILE__, __LINE__, __PRETTY_FUNCTION__)

#define TRACE_DEBUG(tracer, message) TRACE_LOG(tracer, demiplane::scroll::LogLevel::Debug, message)
#define TRACE_INFO(tracer, message)  TRACE_LOG(tracer, demiplane::scroll::LogLevel::Info, message)
#define TRACE_WARN(tracer, message)  TRACE_LOG(tracer, demiplane::scroll::LogLevel::Warning, message)
#define TRACE_ERROR(tracer, message) TRACE_LOG(tracer, demiplane::scroll::LogLevel::Error, message)
#define TRACE_FATAL(tracer, message) TRACE_LOG(tracer, demiplane::scroll::LogLevel::Fatal, message)

#define TRACER_STREAM_LOG(tracer, level) (tracer)->force_stream(level, __FILE__, __LINE__, __PRETTY_FUNCTION__)

#define TRACER_STREAM_DEBUG() TRACER_STREAM_LOG(get_tracer(), demiplane::scroll::LogLevel::Debug)
#define TRACER_STREAM_INFO()  TRACER_STREAM_LOG(get_tracer(), demiplane::scroll::LogLevel::Info)
#define TRACER_STREAM_WARN()  TRACER_STREAM_LOG(get_tracer(), demiplane::scroll::LogLevel::Warning)
#define TRACER_STREAM_ERROR() TRACER_STREAM_LOG(get_tracer(), demiplane::scroll::LogLevel::Error)
#define TRACER_STREAM_FATAL() TRACER_STREAM_LOG(get_tracer(), demiplane::scroll::LogLevel::Fatal)

#else

// When tracing is disabled, all macros do nothing.
#define TRACE_LOG(tracer, level, message) ((void) 0)
#define TRACE_DEBUG(tracer, message)      ((void) 0)
#define TRACE_INFO(tracer, message)       ((void) 0)
#define TRACE_WARN(tracer, message)       ((void) 0)
#define TRACE_ERROR(tracer, message)      ((void) 0)
#define TRACE_FATAL(tracer, message)      ((void) 0)
#define TRACER_STREAM_DEBUG()             ((void) 0)
#define TRACER_STREAM_INFO()              ((void) 0)
#define TRACER_STREAM_WARN()              ((void) 0)
#define TRACER_STREAM_ERROR()             ((void) 0)
#define TRACER_STREAM_FATAL()             ((void) 0)
#endif
